A) Services (units)

Service de maintenance (oneshot) : mariadb-maintain.service pour ANALYZE TABLE / OPTIMIZE TABLE selon un scope.

Service de santé (oneshot) : mariadb-health.service (mysqladmin ping, test d’une requête simple) qui écrit un statut dans /var/tmp.

B) Timers

Timer backup quotidien : mariadb-backup.timer (OnCalendar=chaque minute pour des raisons de démo) + Persistent=true.

Timer purge binlogs : mariadb-binlog-purge.timer (ex.: quotidien) → PURGE BINARY LOGS BEFORE DATE_SUB(NOW(), INTERVAL 7 DAY);.

Timer santé fréquent : mariadb-health.timer (toutes 5 min) qui log ou notifie (webhook/mail si tu veux). j'ai postfix

Timer rotation slow log (si tu n’utilises pas logrotate) : compresse & tronque proprement.

C) Targets (orchestration)

deploy.target : ordre séquentiel : mariadb.service → db-migrate.service → db-seed.service → ton-app.service (via After/Requires dans les services).

db-maintenance.target : stoppe l’app, lance mariadb-maintain.service, puis relance l’app (enchaînement via PartOf/After)












