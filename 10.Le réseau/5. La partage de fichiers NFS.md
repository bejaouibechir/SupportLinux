

# Exercice 5 : Partage de fichiers avec NFS

## Objectifs

1. Installer et configurer un serveur NFS sur **Machine1**.

2. Monter un r√©pertoire NFS depuis **Machine2**.

3. Tester la lecture/√©criture √† travers le partage.

4. (optionnel) Rendre le montage permanent.

---

## √âtapes pratiques

### 1. Installer NFS

Sur **Machine1** (serveur) :

```bash
sudo apt update
sudo apt install nfs-kernel-server -y
```

Sur **Machine2** (client) :

```bash
sudo apt update
sudo apt install nfs-common -y
```

---

### 2. Cr√©er un dossier √† partager (Machine1)

```bash
sudo mkdir -p /srv/nfs/share
sudo chown nobody:nogroup /srv/nfs/share
```

---

### 3. Configurer l‚Äôexport (Machine1)

√âditez `/etc/exports` :

```ini
/srv/nfs/share 10.10.10.2(rw,sync,no_subtree_check)
```

Explications :

- `10.10.10.2` ‚Üí seul Machine2 a le droit de monter.

- `rw` ‚Üí lecture/√©criture autoris√©es.

- `sync` ‚Üí les √©critures sont confirm√©es imm√©diatement.

- `no_subtree_check` ‚Üí simplifie les contr√¥les.

Appliquez la configuration :

```bash
sudo exportfs -ra
sudo systemctl restart nfs-kernel-server
```

---

### 4. Monter le partage NFS (Machine2)

Cr√©ez un dossier de montage :

```bash
sudo mkdir -p /mnt/nfs_share
```

Montez le partage depuis Machine1 :

```bash
sudo mount 10.10.10.1:/srv/nfs/share /mnt/nfs_share
```

V√©rifiez :

```bash
df -h | grep nfs
```

---

### 5. Tester le partage

Sur **Machine2** :

```bash
echo "Hello depuis Machine2" | sudo tee /mnt/nfs_share/test.txt
```

Sur **Machine1** :

```bash
cat /srv/nfs/share/test.txt
```

üëâ Vous devez voir le contenu √©crit depuis Machine2.

---

### 6. (optionnel) Montage permanent

Ajoutez dans `/etc/fstab` de Machine2 :

```ini
10.10.10.1:/srv/nfs/share  /mnt/nfs_share  nfs  defaults  0  0
```

Puis :

```bash
sudo mount -a
```

---

# R√©sultat attendu

- Machine2 acc√®de en lecture/√©criture au r√©pertoire partag√© `/srv/nfs/share` de Machine1.

- Le partage est fonctionnel et peut √™tre rendu permanent via `/etc/fstab`.

- Vous avez compris le r√¥le des permissions et des options NFS.


