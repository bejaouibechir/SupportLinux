parfait 👌 on ouvre donc un **nouvel atelier** consacré à **Docker**, toujours dans ton format pédagogique complet :  
→ clair, pratique, progressif, avec étapes, explications et nettoyage final.

---

# 🧱 Atelier 9 — Installation et désinstallation de Docker sur Debian/Ubuntu

---

## 🎯 Objectif

Installer proprement **Docker Engine** et ses outils (CLI, Compose),  
comprendre les fichiers installés et enfin le **désinstaller proprement** pour remettre le système à l’état initial.

---

## 🧰 Pré-requis

- Debian 12 ou Ubuntu 22.04

- Accès `sudo`

- Connexion Internet active

---

## 🪜 Étapes pas à pas

---

### 1️⃣ Vérification préalable

```bash
lsb_release -a
sudo apt update
```

S’assurer que le système est à jour :

```bash
sudo apt upgrade -y
```

---

### 2️⃣ Suppression d’anciennes versions (le cas échéant)

```bash
sudo apt remove -y docker docker-engine docker.io containerd runc
```

---

### 3️⃣ Installation des dépendances

```bash
sudo apt install -y ca-certificates curl gnupg lsb-release
```

---

### 4️⃣ Ajout de la clé GPG officielle de Docker

Créer le répertoire pour les clés :

```bash
sudo install -m 0755 -d /etc/apt/keyrings
```

Télécharger la clé officielle :

```bash
curl -fsSL https://download.docker.com/linux/$(. /etc/os-release && echo "$ID")/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg
```

Vérifier :

```bash
ls -l /etc/apt/keyrings/docker.gpg
```

---

### 5️⃣ Ajouter le dépôt Docker officiel

Créer le fichier **`/etc/apt/sources.list.d/docker.list`** :

```bash
deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/$(. /etc/os-release && echo "$ID") $(lsb_release -cs) stable
```

---

### 6️⃣ Installation de Docker Engine

```bash
sudo apt update
sudo apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

---

### 7️⃣ Vérification de l’installation

```bash
sudo systemctl status docker --no-pager
```

Tester un conteneur :

```bash
sudo docker run hello-world
```

> ✅ Résultat attendu :  
> “Hello from Docker! … Your installation appears to be working correctly.”

---

### 8️⃣ Activer Docker au démarrage

```bash
sudo systemctl enable docker
```

---

### 9️⃣ Gérer les permissions utilisateur (optionnel)

Ajouter ton utilisateur au groupe Docker :

```bash
sudo usermod -aG docker $USER
```

Puis reconnecte-toi (ou redémarre ta session) pour que la permission prenne effet.

---

### 🔍 Vérifications supplémentaires

Lister les versions :

```bash
docker --version
docker compose version
```

Lister les services :

```bash
systemctl list-units | grep docker
```

---

### 🧹 10️⃣ Désinstallation complète de Docker

#### a) Arrêter les services

```bash
sudo systemctl stop docker docker.socket containerd
```

#### b) Supprimer les paquets

```bash
sudo apt purge -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

#### c) Supprimer les fichiers résiduels

```bash
sudo rm -rf /var/lib/docker /var/lib/containerd
sudo rm -f /etc/apt/sources.list.d/docker.list /etc/apt/keyrings/docker.gpg
sudo apt autoremove -y && sudo apt clean
```

#### d) Vérification finale

```bash
which docker || echo "Docker correctement désinstallé ✅"
```


