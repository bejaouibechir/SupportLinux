# Les commandes basiques

---

### **Exercice 1 : Naviguer dans les répertoires et explorer la structure**

* **Objectif** : Explorer la structure du système de fichiers avec `cd`, `pwd`, `ls`.
* **Instructions** :

  1. Utilisez `pwd` pour afficher votre répertoire actuel.
  2. Allez dans `/etc` puis listez le contenu avec `ls`.
  3. Revenez au répertoire précédent avec `cd -`.
  4. Montez de deux niveaux avec `cd ../..`.

**Solution :**

```bash
pwd
cd /etc && ls
cd -
cd ../..
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 2 : Variantes utiles de `cd`**

* **Objectif** : Maîtriser `cd ~`, `cd -`, `cd ..`, `cd ../..`, `cd ~utilisateur`.
* **Instructions** :

  1. Allez dans votre HOME.
  2. Revenez au dossier précédent.
  3. Montez d’un niveau, puis de deux.
  4. (Si possible) Allez dans le HOME d’un autre utilisateur.

**Solution :**

```bash
cd ~
cd -
cd ..
cd ../..
cd ~root   # si lisible, sinon ~<autre_user>
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 3 : Lister avec `ls` (options de base)**

* **Objectif** : Utiliser `ls -a`, `ls -l`, `ls -h`.
* **Instructions** :

  1. Affichez tous les fichiers (y compris cachés) du HOME.
  2. Affichez la liste détaillée avec tailles lisibles.

**Solution :**

```bash
cd ~
ls -a
ls -lh
```

**Nuances Debian/Ubuntu** : Identiques. (Couleurs souvent activées via alias `--color=auto`.)

---

### **Exercice 4 : Lister avec `ls` (tri & combinaisons)**

* **Objectif** : Utiliser `ls -t`, `-r`, `-S`, combiner les options.
* **Instructions** :

  1. Triez par date, ancien → récent.
  2. Triez par taille, du plus grand au plus petit.
  3. Combinez long format + tailles lisibles + tri par date.

**Solution :**

```bash
ls -ltr     # ancien → récent
ls -lSh     # par taille (gros d'abord)
ls -lhtr    # long, human, tri date inversé
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 5 : Afficher uniquement les dossiers et utiliser les motifs**

* **Objectif** : `ls -d */`, glob `*.log`, `*.{jpg,png}`.
* **Instructions** :

  1. Listez uniquement les dossiers du répertoire courant.
  2. Affichez tous les `.log` s’ils existent.
  3. Affichez les `.jpg` ou `.png` (un seul niveau).

**Solution :**

```bash
ls -d */
ls *.log 2>/dev/null
ls *.{jpg,png} 2>/dev/null
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 6 : Visualiser l’arborescence avec `tree`**

* **Objectif** : Installer et utiliser `tree`.
* **Instructions** :

  1. Installez `tree`.
  2. Affichez l’arborescence de `~/Documents` sur 2 niveaux.

**Solution :**

```bash
# Ubuntu (sudo présent par défaut)
sudo apt update && sudo apt install -y tree

# Debian minimal si sudo absent :
# su - ; apt update && apt install -y tree ; exit

tree -L 2 ~/Documents
```

**Nuances Debian/Ubuntu** : Identiques pour l’outil ; sur Debian minimal, `sudo` peut manquer.

---

### **Exercice 7 : Retrouver un fichier avec `find`**

* **Objectif** : Utiliser `find` pour localiser des fichiers.
* **Instructions** :

  1. Recherchez un fichier nommé `passwd` sous `/etc`.
  2. Recherchez tous les fichiers `.conf` sous `/etc`.

**Solution :**

```bash
find /etc -name passwd
find /etc -type f -name "*.conf"
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 8 : Identifier binaire, manuel et chemin avec `which`/`whereis`**

* **Objectif** : Localiser des commandes.
* **Instructions** :

  1. Trouvez l’emplacement de `ls`.
  2. Affichez binaire et pages de manuel de `bash`.

**Solution :**

```bash
which ls
whereis bash
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 9 : Chemin parent & nom de fichier avec `dirname` / `basename`**

* **Objectif** : Extraire le dossier parent et le nom.
* **Instructions** :

  1. Affichez le parent de `/etc/ssh/sshd_config`.
  2. Affichez le nom de fichier de ce chemin.

**Solution :**

```bash
dirname /etc/ssh/sshd_config    # /etc/ssh
basename /etc/ssh/sshd_config   # sshd_config
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 10 : Piles de répertoires `pushd`, `popd`, `dirs`**

* **Objectif** : Naviguer efficacement entre plusieurs chemins.
* **Instructions** :

  1. Empilez `/etc` puis `/var`.
  2. Affichez la pile, puis revenez en arrière deux fois.

**Solution :**

```bash
pushd /etc
pushd /var
dirs
popd
popd
```

**Nuances Debian/Ubuntu** : Identiques (builtins Bash).

---

## Thème 2 — Fichiers & répertoires

---

### **Exercice 11 : Créer des dossiers avec `mkdir`**

* **Objectif** : Utiliser `mkdir -p` et définir des permissions.
* **Instructions** :

  1. Créez `~/LabFS/ProjetA/src`.
  2. Créez `~/LabFS/Protégé` avec permission `700`.

**Solution :**

```bash
mkdir -p ~/LabFS/ProjetA/src
mkdir -m 700 ~/LabFS/Protege
ls -ld ~/LabFS/Protege
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 12 : Créer/vider des fichiers (`touch`, `truncate`)**

* **Objectif** : Créer/mettre à jour l’horodatage, vider un fichier.
* **Instructions** :

  1. Créez `notes.txt` puis mettez à jour son horodatage.
  2. Ajoutez du texte, puis videz le fichier.

**Solution :**

```bash
touch notes.txt
touch -m notes.txt
echo "ligne 1" >> notes.txt
truncate -s 0 notes.txt
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 13 : Copier des fichiers/répertoires avec `cp`**

* **Objectif** : `cp -r`, `-a`, `-u`, `-i`, `-v`.
* **Instructions** :

  1. Copiez récursivement `~/LabFS/ProjetA` vers `~/LabFS/BackupA`.
  2. Refaites une copie **archivistique** (préserve attributs).
  3. Copiez uniquement si la source est plus récente.

**Solution :**

```bash
cp -r ~/LabFS/ProjetA ~/LabFS/BackupA
cp -a ~/LabFS/ProjetA/ ~/LabFS/BackupA_arch/
cp -uv ~/LabFS/ProjetA/* ~/LabFS/BackupA/
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 14 : Déplacer/renommer avec `mv`**

* **Objectif** : `mv -i -n -v`, renommage simple.
* **Instructions** :

  1. Renommez `notes.txt` en `notes_old.txt`.
  2. Déplacez `notes_old.txt` dans `~/LabFS/ProjetA`.

**Solution :**

```bash
mv -v notes.txt notes_old.txt
mv -v notes_old.txt ~/LabFS/ProjetA/
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 15 : Supprimer avec `rm` & `rmdir` (sécurisé)**

* **Objectif** : `rm -i`, `rm -r`, `rm -rf`, `rmdir`.
* **Instructions** :

  1. Supprimez un dossier vide.
  2. Supprimez un dossier non vide **dans votre HOME** (sécurité).
  3. Activez la confirmation interactive.

**Solution :**

```bash
rmdir ~/LabFS/TempVide 2>/dev/null || mkdir -p ~/LabFS/TempVide && rmdir ~/LabFS/TempVide
mkdir -p ~/LabFS/TempNonVide && touch ~/LabFS/TempNonVide/a
rm -r ~/LabFS/TempNonVide
alias rm='rm -i'   # protection (dans ~/.bashrc pour pérenniser)
```

**Nuances Debian/Ubuntu** : Identiques.
**⚠️ Prudence** : n’utilisez jamais `rm -rf /` !

---

### **Exercice 16 : Liens symboliques et physiques avec `ln`**

* **Objectif** : `ln` (hard link), `ln -s` (symlink), inodes.
* **Instructions** :

  1. Créez `data.txt` et un **lien physique** `data.hard`.
  2. Créez un **lien symbolique** `data.sym`.
  3. Comparez les inodes.

**Solution :**

```bash
echo "demo" > data.txt
ln data.txt data.hard
ln -s data.txt data.sym
ls -li data.*
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 17 : Permissions avec `chmod` (symbolique & numérique)**

* **Objectif** : Utiliser `u/g/o`, `+/-/=` et octal (640, 755).
* **Instructions** :

  1. Créez `script.sh` puis rendez-le exécutable pour l’utilisateur.
  2. Fixez les permissions à `640`, puis à `755`.

**Solution :**

```bash
touch script.sh
chmod u+x script.sh
chmod 640 script.sh
chmod 755 script.sh
ls -l script.sh
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 18 : Propriétaires & groupes (`chown`, `chgrp`)**

* **Objectif** : Changer propriétaire/groupe (nécessite privilèges).
* **Instructions** :

  1. Créez `rapport.txt`.
  2. Changez le groupe vers le vôtre (sans privilèges).
  3. (Optionnel admin) Changez propriétaire → `root`.

**Solution :**

```bash
touch rapport.txt
chgrp "$(id -gn)" rapport.txt
# Opération privilégiée :
# Ubuntu : sudo chown root:root rapport.txt
# Debian sans sudo : su - ; chown root:root rapport.txt ; exit
```

**Nuances Debian/Ubuntu** : Différence d’usage de `sudo` (Ubuntu l’a par défaut).

---

### **Exercice 19 : Recherches avancées avec `find`**

* **Objectif** : `-type`, `-name`, `-size`, `-mtime`, `-exec`.
* **Instructions** :

  1. Trouvez les fichiers `.log` modifiés il y a < 2 jours.
  2. Trouvez les fichiers > 10 Mo dans `~/`.
  3. Supprimez (sécurisé) des `*.tmp` sous `~/LabFS/Test`.

**Solution :**

```bash
find /var/log -type f -name "*.log" -mtime -2
find ~ -type f -size +10M
mkdir -p ~/LabFS/Test && touch ~/LabFS/Test/a.tmp
find ~/LabFS/Test -type f -name "*.tmp" -print -exec rm -i {} \;
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 20 : Identifier le type d’un fichier avec `file`**

* **Objectif** : Distinguer texte/binaire/script.
* **Instructions** :

  1. Vérifiez le type de `script.sh` et d’un binaire système.

**Solution :**

```bash
file script.sh
file /bin/ls
```

**Nuances Debian/Ubuntu** : Identiques.

---

## Thème 3 — Affichage, pagination, recherche & comptage

---

### **Exercice 21 : Lire un fichier avec `cat`, `nl`, `less`**

* **Objectif** : Afficher, numéroter, paginer.
* **Instructions** :

  1. Créez `lignes.txt` (20 lignes).
  2. Affichez-le avec numéros, puis avec pagination.

**Solution :**

```bash
for i in {1..20}; do echo "ligne $i"; done > lignes.txt
nl lignes.txt
less lignes.txt   # q pour quitter, /mot, n/p, G, g
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 22 : `head` & `tail` (suivi temps réel)**

* **Objectif** : Afficher début/fin, suivre un log.
* **Instructions** :

  1. Affichez les 5 premières et 5 dernières lignes de `lignes.txt`.
  2. Suivez un log système en temps réel.

**Solution :**

```bash
head -n 5 lignes.txt
tail -n 5 lignes.txt
# Journal classique (selon config) :
tail -f /var/log/syslog  # Ubuntu : présent par défaut ; Debian : présent si rsyslog
```

**Nuances Debian/Ubuntu** : Debian peut n’avoir que journald → utilisez `journalctl -f`.

---

### **Exercice 23 : Rechercher avec `grep` (basique)**

* **Objectif** : `grep -i`, `-n`, `-r`.
* **Instructions** :

  1. Recherchez “ligne 10” dans `lignes.txt`.
  2. Recherchez “root” récursivement sous `/etc` (insensible à la casse).

**Solution :**

```bash
grep -n "ligne 10" lignes.txt
grep -ri "root" /etc
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 24 : Expressions régulières avec `grep -E`**

* **Objectif** : Utiliser les méta-caractères.
* **Instructions** :

  1. Affichez les lignes finissant par un nombre pair (2,4,6,8,0).

**Solution :**

```bash
grep -nE ".*[02468]$" lignes.txt
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 25 : Extraire des colonnes avec `cut`**

* **Objectif** : `cut -d -f`.
* **Instructions** :

  1. Créez `data.csv` avec 3 colonnes séparées par `;`.
  2. Affichez uniquement la colonne 2.

**Solution :**

```bash
printf "a;1;x\nb;2;y\nc;3;z\n" > data.csv
cut -d';' -f2 data.csv
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 26 : Trier avec `sort`**

* **Objectif** : `sort -n`, `-r`, `-k`.
* **Instructions** :

  1. Triez `data.csv` sur la colonne 2 (numérique), puis inversez.

**Solution :**

```bash
sort -t';' -k2,2n data.csv
sort -t';' -k2,2nr data.csv
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 27 : Éliminer les doublons avec `uniq`**

* **Objectif** : Compter et dédupliquer.
* **Instructions** :

  1. Créez `noms.txt` avec quelques doublons.
  2. Affichez les occurrences par valeur.

**Solution :**

```bash
printf "ana\nbob\nana\nbob\nbob\nzoe\n" > noms.txt
sort noms.txt | uniq -c
```

**Nuances Debian/Ubuntu** : Identiques (penser à `sort` avant `uniq`).

---

### **Exercice 28 : Compter avec `wc`**

* **Objectif** : Lignes, mots, octets.
* **Instructions** :

  1. Comptez le nombre de lignes et de mots dans `lignes.txt`.

**Solution :**

```bash
wc -l lignes.txt
wc -w lignes.txt
wc -lw lignes.txt
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 29 : Chaîner `find` et `xargs`**

* **Objectif** : Appliquer une commande sur un ensemble.
* **Instructions** :

  1. Listez les permissions (long format) de tous les `.conf` sous `/etc` via `xargs`.

**Solution :**

```bash
find /etc -type f -name "*.conf" -print0 | xargs -0 ls -l
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 30 : Lire des fichiers compressés avec `zcat` / `zgrep`**

* **Objectif** : Sans décompresser sur disque.
* **Instructions** :

  1. Générez un `.gz` et lisez-le avec `zcat`.
  2. Cherchez un motif dans un `.gz` avec `zgrep`.

**Solution :**

```bash
echo -e "a\nb\nc" > demo.txt
gzip demo.txt
zcat demo.txt.gz
zgrep -n "b" demo.txt.gz
```

**Nuances Debian/Ubuntu** : Identiques.

---

## Thème 4 — Archivage, compression, téléchargement & intégrité

---

### **Exercice 31 : Créer/extraire une archive `tar`**

* **Objectif** : `tar -cvf`, `-xvf`.
* **Instructions** :

  1. Créez `MonProjet` avec 2 fichiers.
  2. Archivez-le en `mon_projet.tar`.
  3. Extrayez l’archive dans `Extract/`.

**Solution :**

```bash
mkdir -p MonProjet && touch MonProjet/{f1.txt,f2.txt}
tar -cvf mon_projet.tar MonProjet
mkdir -p Extract && tar -xvf mon_projet.tar -C Extract
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 32 : `tar` + compression gzip/bzip2/xz**

* **Objectif** : `-z` (gzip), `-j` (bzip2), `-J` (xz).
* **Instructions** :

  1. Créez `projet.tar.gz`, `projet.tar.bz2`, `projet.tar.xz`.

**Solution :**

```bash
tar -czvf projet.tar.gz MonProjet
tar -cjvf projet.tar.bz2 MonProjet
tar -cJvf projet.tar.xz MonProjet
```

**Nuances Debian/Ubuntu** : Identiques (outils installés par défaut).

---

### **Exercice 33 : Lister et extraire sélectivement**

* **Objectif** : `tar -tf`, `-xvf -C`, `--wildcards`.
* **Instructions** :

  1. Listez le contenu de `projet.tar.gz`.
  2. Extrayez uniquement `f1.txt` dans `Only/`.

**Solution :**

```bash
tar -tf projet.tar.gz
mkdir -p Only && tar -xvf projet.tar.gz -C Only MonProjet/f1.txt
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 34 : Exclure des fichiers à l’archivage**

* **Objectif** : `--exclude`.
* **Instructions** :

  1. Archivez `MonProjet` en excluant `*.txt`.

**Solution :**

```bash
tar -czvf projet_sans_txt.tar.gz MonProjet --exclude="*.txt"
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 35 : Compresser/décompresser avec `zip`/`unzip`**

* **Objectif** : `zip -r`, `-9`, `unzip`.
* **Instructions** :

  1. Créez une archive `zpack.zip` de `MonProjet`.
  2. Décompressez-la dans `Unz/`.

**Solution :**

```bash
# Installer si absent :
# Ubuntu : sudo apt install -y zip unzip
# Debian : su - ; apt install -y zip unzip ; exit
zip -r -9 zpack.zip MonProjet
mkdir -p Unz && unzip zpack.zip -d Unz
```

**Nuances Debian/Ubuntu** : Paquets parfois absents par défaut sur Debian.

---

### **Exercice 36 : Gérer `gzip`/`gunzip` sans perdre l’original**

* **Objectif** : `gzip -k`, `gunzip -k`.
* **Instructions** :

  1. Compressez `f1.txt` en conservant l’original.
  2. Décompressez en conservant le `.gz`.

**Solution :**

```bash
cp MonProjet/f1.txt .
gzip -k f1.txt
gunzip -k f1.txt.gz
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 37 : Téléchargements avec `wget`**

* **Objectif** : `-O`, `-c`, `--limit-rate`.
* **Instructions** :

  1. Téléchargez un fichier vers un nom choisi.
  2. Reprenez un téléchargement interrompu.
  3. Limitez le débit à 200K.

**Solution :**

```bash
wget -O exemple.iso https://example.com/fichier.iso
wget -c https://example.com/fichier.iso
wget --limit-rate=200k https://example.com/gros.bin
```

**Nuances Debian/Ubuntu** : Ubuntu a souvent `wget` par défaut ; Debian minimal : `apt install -y wget`.

---

### **Exercice 38 : Téléchargements avec `curl`**

* **Objectif** : `-O`, `-L`, `-o`.
* **Instructions** :

  1. Téléchargez un fichier en conservant le nom distant.
  2. Suivez les redirections si nécessaire.

**Solution :**

```bash
# Installer si absent : sudo apt install -y curl  (ou su - ; apt install -y curl ; exit)
curl -O https://example.com/fichier.zip
curl -L -o autre_nom.zip https://example.com/redirect
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 39 : Vérifier l’intégrité (`sha256sum`)**

* **Objectif** : Vérifier un téléchargement.
* **Instructions** :

  1. Calculez la somme SHA-256 de `exemple.iso`.
  2. Comparez avec une somme attendue.

**Solution :**

```bash
sha256sum exemple.iso
# Comparez visuellement avec la somme fournie par l’éditeur.
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 40 : Localiser rapidement avec `locate`**

* **Objectif** : Utiliser la base d’index `locate`.
* **Instructions** :

  1. Installez `plocate` (ou `mlocate`).
  2. Mettez à jour la base si nécessaire.
  3. Recherchez `sshd_config`.

**Solution :**

```bash
# Ubuntu / Debian récents : plocate
sudo apt install -y plocate  # Debian sans sudo : su - ; apt install -y plocate ; exit
sudo updatedb                # si nécessaire (parfois lancé par timer)
locate sshd_config
```

**Nuances Debian/Ubuntu** : Les deux utilisent désormais souvent **plocate** (fourni comme `locate`). Sur installations minimales, le paquet peut manquer.

---

## Thème 5 — Historique & productivité shell

---

### **Exercice 41 : Timestamps dans l’historique**

* **Objectif** : Configurer les horodatages.
* **Instructions** :

  1. Ajoutez la variable d’environnement à `~/.bashrc`.
  2. Rechargez, puis affichez l’historique.

**Solution :**

```bash
echo 'HISTTIMEFORMAT="%Y-%m-%d %T "' >> ~/.bashrc
source ~/.bashrc
history | head
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 42 : Rappeler des commandes (`!!`, `!n`, `!?mot?`)**

* **Objectif** : Exécuter rapidement depuis l’historique.
* **Instructions** :

  1. Exécutez `ls` puis rejouez-la avec `!!`.
  2. Exécutez la commande numéro 15.
  3. Exécutez la dernière commande contenant “ssh”.

**Solution :**

```bash
ls
!!
!15
!?ssh?
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 43 : Recherche interactive (Ctrl+R)**

* **Objectif** : Utiliser la recherche inversée.
* **Instructions** :

  1. Tapez `Ctrl+R`, cherchez `grep`, validez.
  2. (Astuce) `Alt+.` colle le dernier argument d’une commande précédente.

**Solution :**

* `Ctrl+R`, écrire `grep`, `Entrée`.
* `Alt+.` pendant l’édition de commande pour récupérer le dernier argument.
  **Nuances Debian/Ubuntu** : Identiques (Bash).

---

### **Exercice 44 : Alias pratiques**

* **Objectif** : Créer des alias dans `~/.bashrc`.
* **Instructions** :

  1. Ajoutez `ll`, `la`, et `rm` sécurisé.
  2. Rechargez et testez.

**Solution :**

```bash
cat <<'EOF' >> ~/.bashrc
alias ll='ls -alF'
alias la='ls -A'
alias rm='rm -i'
EOF
source ~/.bashrc
ll
```

**Nuances Debian/Ubuntu** : Identiques.

---

### **Exercice 45 : Variables d’environnement et `PATH`**

* **Objectif** : Voir/étendre le `PATH`.
* **Instructions** :

  1. Affichez `PATH`.
  2. Ajoutez `~/bin` au `PATH` dans `~/.bashrc`.

**Solution :**

```bash
echo "$PATH"
echo 'export PATH="$HOME/bin:$PATH"' >> ~/.bashrc
source ~/.bashrc
echo "$PATH"
```

**Nuances Debian/Ubuntu** : Identiques.

---

## Remarques finales (pédagogie & sécurité)

* **Logs en temps réel** :

  * Ubuntu : `tail -f /var/log/syslog`.
  * Debian “journald-only” : `journalctl -f` (installez `rsyslog` si vous voulez `/var/log/syslog`).
* **Paquets non installés par défaut** (souvent sur Debian minimal) : `sudo`, `zip`, `unzip`, `wget`, `curl`, `plocate`, `tree`.

  * Ubuntu : `sudo` est prêt.
  * Debian : `su -` puis `apt install …`, ou installez `sudo` et ajoutez l’utilisateur au groupe `sudo`.

