 # üóìÔ∏è Th√®me 6 ‚Äî Planification (cron / at) ‚Äî 40 exercices pratiques



 ## A) Bases de `cron` (utilisateur  & syst√®me)



 ### 1) Cr√©er sa premi√®re t√¢che utilisateur



 **√ânonc√© :** Ex√©cuter `date >> ~/cron.log` chaque minute.

 **D√©marche :**



```bash

crontab -e

 #  *  *  *  *  * date >> $HOME/cron.log

```



 **Validation :** apr√®s 2‚Äì3 min, `tail ~/cron.log`.
 
 **Conseils :** utilisez `crontab -l` pour relire.

 **Astuces :** pr√©f√©rez des  **chemins absolus ** dans les lignes cron.

 **Pi√®ges :** variables d‚Äôenvironnement limit√©es ‚Üí `PATH` minimal.



---



 ### 2) Configurer PATH et SHELL dans crontab



 **√ânonc√© :** D√©finir un `PATH` explicite dans la crontab.

 **D√©marche :**



```bash

crontab -e

 # SHELL=/bin/bash

 # PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin

 #  */5  *  *  *  * /usr/bin/env >> $HOME/env.txt

```



 **Validation :** `cat ~/env.txt`.

 **Conseils :** fixez `PATH` en t√™te de crontab.

 **Astuces :** `SHELL=/bin/bash` si vous utilisez des features Bash.

 **Pi√®ges :** supposer le m√™me PATH qu‚Äôen session interactive.



---



 ### 3) Utiliser les alias @hourly/@daily/@reboot



 **√ânonc√© :** √âcrire 3 jobs : `@reboot`, `@hourly`, `@daily`.

 **D√©marche :**



```bash

crontab -e

 # @reboot echo "boot $(date)" >> $HOME/boot.log

 # @hourly echo "hour $(date)" >> $HOME/hour.log

 # @daily echo "day $(date)" >> $HOME/day.log

```



 **Validation :** reboot pour `@reboot`.

 **Conseils :** utilisez `@reboot` pour initialisations l√©g√®res.

 **Astuces :** combinez `sleep 30` apr√®s `@reboot` si d√©pendances tardives.

 **Pi√®ges :** t√¢ches lourdes au boot = d√©marrage lent.



---



 ### 4) Comprendre run-parts et /etc/cron.daily



 **√ânonc√© :** Ajouter un script ex√©cutable dans `/etc/cron.daily/`.

 **D√©marche :**



```bash

echo -e '#!/bin/sh  ndate >> /var/log/mydaily.log' | sudo tee /etc/cron.daily/mydaily

sudo chmod 755 /etc/cron.daily/mydaily

```



 **Validation :** forcer via `sudo run-parts --report /etc/cron.daily`.

 **Conseils :** `run-parts` n‚Äôex√©cute  **pas ** les fichiers avec point (`.`).

 **Astuces :** nommez `mydaily` sans extension.

 **Pi√®ges :** oublier le bit ex√©cutable ‚Üí jamais lanc√©.



---



 ### 5) `MAILTO` pour recevoir les sorties



 **√ânonc√© :** Envoyer la sortie d‚Äôun job par mail.

 **D√©marche :**



```bash

crontab -e

 # MAILTO="votre.email@example.com"

 #  */10  *  *  *  * echo "rapport $(date)"

```



 **Validation :** v√©rifier mail (via MTA local).

 **Conseils :** sinon redirigez vers un log contr√¥l√©.

 **Astuces :** `2> &1` pour capturer stderr.

 **Pi√®ges :** MTA non configur√© ‚Üí mails perdus.



---



 ### 6) Journaliser proprement (stdout/stderr)



 **√ânonc√© :** S√©parer logs out/err.

 **D√©marche :**



```bash

 #  */5  *  *  *  * /usr/local/bin/job.sh >> $HOME/job.out 2>> $HOME/job.err

```



 **Validation :** consulter les deux logs.

 **Conseils :** purger r√©guli√®rement (logrotate).

 **Astuces :** `logger -t job "msg"` pour syslog.

 **Pi√®ges :** `>` √©crase ; utilisez `>>` pour append.



---



 ### 7) Emp√™cher la concurrence (flock)



 **√ânonc√© :** Ne laisser qu‚Äôune instance d‚Äôun script tourner.

 **D√©marche :**



```bash

 #  */3  *  *  *  * flock -n /tmp/backup.lock /usr/local/bin/backup.sh

```



 **Validation :** lancez manuellement en parall√®le.

 **Conseils :** `-n` (non bloquant) + message si d√©j√† en cours.

 **Astuces :** verrous par fichier distinct par t√¢che.

 **Pi√®ges :** oublier `flock` ‚Üí chevauchements destructifs.



---



 ### 8) M√©canisme allow/deny



 **√ânonc√© :** Autoriser cron √† certains utilisateurs.

 **D√©marche :**



```bash

echo "user1" | sudo tee -a /etc/cron.allow

 # et/ou

echo "user2" | sudo tee -a /etc/cron.deny

```



 **Validation :** `su - user1; crontab -e` (OK) / `user2` (refus).

 **Conseils :** pr√©f√©rez `cron.allow` pour whitelisting.

 **Astuces :** documentez la politique.

 **Pi√®ges :** confondre avec `at.allow/deny` (s√©par√©s).



---



 ### 9) Crontab syst√®me vs utilisateur



 **√ânonc√© :** Planifier un job syst√®me dans `/etc/crontab`.

 **D√©marche :**



```bash

sudoedit /etc/crontab

 # m h dom mon dow user  command

 #  */15  *  *  *  * root /usr/local/bin/healthcheck.sh

```



 **Validation :** check syslog/journalctl.

 **Conseils :** dans `/etc/crontab`, on  **sp√©cifie l‚Äôutilisateur **.

 **Astuces :** pr√©f√©rez `/etc/cron.d/` pour d√©coupages.

 **Pi√®ges :** oublier la colonne user ‚Üí job invalide.



---



 ### 10) D√©calage al√©atoire (stagger)



 **√ânonc√© :** √âviter pics simultan√©s.

 **D√©marche :**



```bash

 # 0  *  *  *  * sleep $((RANDOM % 600)); /usr/local/bin/job.sh

```



 **Validation :** observer heure r√©elle d‚Äôex√©cution.

 **Conseils :** utile sur flottes de serveurs.

 **Astuces :** ou utilisez systemd timers (RandomizedDelaySec).

 **Pi√®ges :** `sleep` trop long ‚Üí chevauchement sans flock.



---



 ## B) Cron avanc√© (robustesse, TZ, anacron, rotation)



 ### 11) Forcer un fuseau horaire



 **√ânonc√© :** Lancer un job √† 02:30 en TZ sp√©cifique.

 **D√©marche :**



````bash

 # 30 2  *  *  * TZ=UTC /usr/local/bin/report.sh

``>

 **Validation :** comparez √† `date -R`.  

 **Conseils :** le TZ peut √™tre mis en t√™te de crontab.  

 **Astuces :** attention aux changements DST.  

 **Pi√®ges :** oublier que `cron` lit TZ au moment de l‚Äôex√©cution.



---



 ### 12) G√©rer DST (heure d‚Äô√©t√©/hiver)

 **√ânonc√© :** S‚Äôassurer qu‚Äôun job critique s‚Äôex√©cute m√™me le jour du passage.  

 **D√©marche :** utilisez 2 horaires (02:15  **et ** 03:15) ou timers systemd.  

 **Validation :** test simulant DST via `faketime`/VM.  

 **Conseils :** pour la fiabilit√©, pr√©f√©rez  **systemd timers **.  

 **Astuces :** `OnCalendar=` g√®re mieux DST.  

 **Pi√®ges :** taches perdues/doubl√©es ce jour-l√†.



---



 ### 13) `anacron` pour h√¥tes non 24/7

 **√ânonc√© :** Lancer `daily` m√™me si PC √©tait √©teint.  

 **D√©marche :** installer/activer `anacron`, placer script dans `/etc/cron.daily/`.  

 **Validation :** √©teindre/allumer, v√©rifier ex√©cution diff√©r√©e.  

 **Conseils :** anacron compl√®te cron pour laptops.  

 **Astuces :** config dans `/etc/anacrontab`.  

 **Pi√®ges :** confondre `cron` (horaires stricts) et `anacron` (√† intervalle).



---



 ### 14) Rotation de logs pour jobs cron

 **√ânonc√© :** Prot√©ger `/var/log/myjob.log` avec logrotate.  

 **D√©marche :**

```bash

sudo tee /etc/logrotate.d/myjob <<'EOF'

/var/log/myjob.log {

&nbsp; weekly

&nbsp; rotate 8

&nbsp; compress

&nbsp; missingok

&nbsp; notifempty

&nbsp; create 0640 root adm

}

EOF

````



 **Validation :** `sudo logrotate -f /etc/logrotate.conf`.

 **Conseils :** couples cron+logrotate sont indissociables.

 **Astuces :** `postrotate` pour signaler un service.

 **Pi√®ges :** laisser grossir les logs ‚Üí disque plein.



---



 ### 15) Pr√©/post-hook dans un wrapper



 **√ânonc√© :** Encapsuler le job dans un script qui trace d√©but/fin et dur√©e.

 **D√©marche :**



```bash

/usr/local/bin/wrapper.sh >> /var/log/wrapper.log 2> &1

 # wrapper.sh : date de d√©but, lance job, date de fin, calcule delta

```



 **Validation :** v√©rifier le log structur√©.

 **Conseils :** standardisez tous vos jobs via un wrapper.

 **Astuces :** ajoutez `hostname` pour multi-serveurs.

 **Pi√®ges :** oublier `set -euo pipefail` dans le wrapper.



---



 ### 16) Notifications de succ√®s/√©chec



 **√ânonc√© :** Envoyer un mail/slack uniquement en cas d‚Äô√©chec.

 **D√©marche :**



```bash

 #  */10  *  *  *  * /usr/local/bin/job.sh || /usr/local/bin/notify _fail.sh "job"

```



 **Validation :** forcer un √©chec.

 **Conseils :** les notifications s√©lectives = moins de bruit.

 **Astuces :** `||` apr√®s la commande, jamais avant.

 **Pi√®ges :** pipeline r√©ussit malgr√© une √©tape √©chou√©e sans `pipefail`.



---



 ### 17) V√©rifier l‚Äôespace disque avant job



 **√ânonc√© :** Ne lancer que si `/` a >20% libre.

 **D√©marche :**



```bash

 #  */30  *  *  *  *  [ $(df -P / | awk 'NR==2{print $5}' | tr -d '%') -lt 80 ]  & & /usr/local/bin/heavy.sh

```



 **Validation :** simulez disque quasi plein.

 **Conseils :** gardez des  **garde-fous **.

 **Astuces :** loggez le motif si skip.

 **Pi√®ges :** `df` locale non standard ‚Üí parse fragile.



---



 ### 18) Contr√¥ler la dur√©e (timeout)



 **√ânonc√© :** Tuer la t√¢che si >10 minutes.

 **D√©marche :**



```bash

 #  */5  *  *  *  * timeout 10m /usr/local/bin/long.sh

```



 **Validation :** script qui dort >10m.

 **Conseils :** toujours un  **timeout ** pour jobs non d√©terministes.

 **Astuces :** `--kill-after=1m` pour SIGKILL tardif.

 **Pi√®ges :** laisser des zombies/locks si arr√™t brutal mal g√©r√©.



---



 ### 19) √âviter l‚Äôex√©cution si instance pr√©c√©dente en cours (PID file)



 **√ânonc√© :** Wrapper avec PID file.

 **D√©marche :**



```bash

 # Pseudo-code: test -f /run/job.pid  & & exit; echo $$ > /run/job.pid; trap 'rm -f /run/job.pid' EXIT; ...

```



 **Validation :** lancer deux fois.

 **Conseils :** pr√©f√©rez `flock` si possible.

 **Astuces :** placez PID dans `/run` (tmpfs).

 **Pi√®ges :** PID file orphelin si crash ‚Üí trap obligatoire.



---



 ### 20) `crontab` depuis Ansible (idempotent)



 **√ânonc√© :** G√©rer crontab via IaC.

 **D√©marche :** module `cron` d‚ÄôAnsible (exemple, c√¥t√© Ansible).

 **Validation :** `ansible-playbook` cr√©e/maintient la ligne.

 **Conseils :** l‚ÄôIaC r√©duit les d√©rives manuelles.

 **Astuces :** taguez vos jobs.

 **Pi√®ges :** conflit entre crontab manuelle et g√©r√©e par CM.



---



 ## C) Cas d‚Äôusage r√©els (sauvegardes, BD, web, s√©curit√©)



 ### 21) Sauvegarde quotidienne avec horodatage



 **√ânonc√© :** Archiver `/srv/app/data` tous les jours √† 01:30.

 **D√©marche :**



```bash

 # 30 1  *  *  * /usr/bin/tar -C /srv/app -czf /backup/app-$(date +  %F).tgz data >> /var/log/backup.log 2> &1

```



 **Validation :** pr√©sence d‚Äôune archive par jour.

 **Conseils :** nettoyer archives anciennes (find -mtime).

 **Astuces :** testez avec `--listed-incremental` (tar incr√©mental).

 **Pi√®ges :** `date` doit √™tre √©chapp√© dans crontab (`  %`).



---



 ### 22) Dump MySQL s√©curis√©



 **√ânonc√© :** Dump base `prod` avec credentials prot√©g√©s.

 **D√©marche :**



```bash

 # 0 2  *  *  * mysqldump --defaults-extra-file=/root/.my.cnf prod | gzip > /backup/mysql/prod-$(date +  %F).sql.gz

```



 **Validation :** fichier cr√©√©  & lisible.

 **Conseils :**  **jamais ** de mot de passe en clair dans la ligne.

 **Astuces :** chiffrez avec gpg si besoin.

 **Pi√®ges :** droits `/root/.my.cnf` (0600).



---



 ### 23) Dump PostgreSQL avec rotation



 **√ânonc√© :** Sauvegarder une base `erp`.

 **D√©marche :**



```bash

 # 10 2  *  *  * PGUSER=backup PGPASSWORD=xxx pg _dump erp | gzip > /backup/pg/erp-$(date +  %F).sql.gz

```



 **Validation :** fichier valide `gunzip -t`.

 **Conseils :** variables d‚Äôenv via fichier sourc√©, pas en clair.

 **Astuces :** `~/.pgpass`.

 **Pi√®ges :** permissions de `.pgpass` (0600), sinon ignor√©.



---



 ### 24) Purge de caches web



 **√ânonc√© :** Vider un cache NGINX/app chaque nuit.

 **D√©marche :**



```bash

 # 0 3  *  *  * /usr/bin/find /var/cache/nginx -type f -mtime +7 -delete

```



 **Validation :** taille du cache diminue.

 **Conseils :** logs avant/apr√®s.

 **Astuces :** utilisez `-print` en pr√©visualisation.

 **Pi√®ges :** motif trop large ‚Üí supprime trop.



---



 ### 25) V√©rif s√©curit√© (fail2ban summary)



 **√ânonc√© :** R√©sum√© hebdomadaire des bans.

 **D√©marche :**



```bash

 # 5 7  *  * 1 /usr/bin/fail2ban-client status | /usr/bin/tee -a /var/log/f2b-weekly.log

```



 **Validation :** log hebdo.

 **Conseils :** compl√©tez par `journalctl -u fail2ban`.

 **Astuces :** envoyez par mail si diff.

 **Pi√®ges :** service non install√© ‚Üí job silencieux.



---



 ### 26) V√©rif certificats TLS expirants



 **√ânonc√© :** Alerter si cert < 14 jours.

 **D√©marche :** script qui parse `openssl x509 -enddate` sur les certs ‚Üí cron quotidien.

 **Validation :** simuler un cert expirant.

 **Conseils :** plan de renouvellement (acme/certbot).

 **Astuces :** `date -d` pour comparer.

 **Pi√®ges :** formats de dates vari√©s.



---



 ### 27) Nettoyage utilisateurs inactifs (rapport)



 **√ânonc√© :** Lister comptes sans login depuis 60j.

 **D√©marche :**



```bash

 # 0 6  *  * 1 lastlog -b 60 | grep -v ' **Never logged in **' | tee /var/log/inactive-users.log

```



 **Validation :** rapport g√©n√©r√©.

 **Conseils :** ne supprimez pas automatiquement (valider d‚Äôabord).

 **Astuces :** envoyez aux RH/S√©cu.

 **Pi√®ges :** comptes syst√®me ‚Üí filtrer.



---



 ### 28) V√©rif int√©grit√© (md5sum) d‚Äôun r√©pertoire critique



 **√ânonc√© :** D√©tecter modifications inattendues.

 **D√©marche :** g√©n√©rer baseline (`find | md5sum`) + cron de comparaison.

 **Validation :** modifier un fichier ‚Üí alerte.

 **Conseils :** mieux : `aide`/`tripwire`.

 **Astuces :** excluez logs et temporaires.

 **Pi√®ges :** faux positifs si fichiers volatiles.



---



 ### 29) Synchronisation offsite (rsync)



 **√ânonc√© :** Sync vers un serveur distant.

 **D√©marche :**



```bash

 # 0 1  *  *  * rsync -a --delete /data backup@remote:/data/ >> /var/log/rsync.log 2> &1

```



 **Validation :** v√©rifiez destination.

 **Conseils :** cl√© SSH d√©di√©e, perms restreintes.

 **Astuces :** `--partial --bwlimit=...`.

 **Pi√®ges :** sens des chemins (src/dst) invers√©.



---



 ### 30) Job sensible aux d√©pendances r√©seau



 **√ânonc√© :** N‚Äôex√©cuter que si `ping` OK.

 **D√©marche :**



```bash

 #  */15  *  *  *  * ping -c1 -W2 8.8.8.8 >/dev/null  & & /usr/local/bin/pull.sh

```



 **Validation :** coupez le r√©seau ‚Üí pas d‚Äôex√©cution.

 **Conseils :** loggez le motif d‚Äô√©chec.

 **Astuces :** plusieurs IPs en fallback.

 **Pi√®ges :** consid√©rer un DNS down ‚â† r√©seau down.



---



 ## D) `at` ‚Äî ex√©cutions ponctuelles  & file d‚Äôattente



 ### 31) Planifier une ex√©cution unique



 **√ânonc√© :** Lancer `/usr/local/bin/scan.sh` dans 20 minutes.

 **D√©marche :**



```bash

echo "/usr/local/bin/scan.sh" | at now + 20 minutes

```



 **Validation :** `atq` (queue), `atrm` pour annuler.

 **Conseils :** parfait pour op√©rations ponctuelles.

 **Astuces :** `at -M` (no mail) ou `-m` (mail).

 **Pi√®ges :** PATH r√©duit, utilisez chemins absolus.



---



 ### 32) Ex√©cuter √† une date pr√©cise



 **√ânonc√© :** Lancer le 25 d√©cembre √† 06:00.

 **D√©marche :**



```bash

echo "echo 'Joyeux No√´l' >> /tmp/x" | at 06:00 12/25

```



 **Validation :** v√©rifier `/tmp/x`.

 **Conseils :** toujours v√©rifier `atq`.

 **Astuces :** formats souples (`tomorrow 7am`).

 **Pi√®ges :** ambigu√Øt√© jour/mois selon locale.



---



 ### 33) Passer un environnement minimal √† `at`



 **√ânonc√© :** Besoin de variables : sourcez un fichier.

 **D√©marche :**



```bash

echo ". $HOME/app.env; /usr/local/bin/job.sh" | at now + 1 hour

```



 **Validation :** le job voit les variables.

 **Conseils :** n‚Äôassumez  **aucune ** variable implicite.

 **Astuces :** logguez l‚Äôenvironnement au d√©but.

 **Pi√®ges :** oublier d‚Äôexporter dans `app.env`.



---



 ### 34) G√©rer acc√®s √† `at` (allow/deny)



 **√ânonc√© :** Autoriser `user1` uniquement.

 **D√©marche :**



```bash

echo user1 | sudo tee /etc/at.allow

```



 **Validation :** `su - user2; echo ls | at now` ‚Üí refus√©.

 **Conseils :** principe de moindre privil√®ge.

 **Astuces :** similaire √† cron, fichiers distincts.

 **Pi√®ges :** confondre avec `cron.allow/deny`.



---



 ### 35) Batch asynchrone (queue `batch`)



 **√ânonc√© :** Lancer quand la charge est basse.

 **D√©marche :**



```bash

echo "/usr/local/bin/heavy.sh" | batch

```



 **Validation :** s‚Äôex√©cute quand load average le permet.

 **Conseils :** utile pour jobs non urgents.

 **Astuces :** ajuster `/etc/atd.conf` selon distrib.

 **Pi√®ges :** impr√©visibilit√© de l‚Äôinstant pr√©cis.



---



 ## E) V√©rification, d√©pannage  & alternatives (timers)



 ### 36) Tracer l‚Äôex√©cution (journaux)



 **√ânonc√© :** Retrouver la derni√®re ex√©cution d‚Äôun job.

 **D√©marche :**



```bash

journalctl -u cron -S today

 # ou /var/log/syslog (Debian), /var/log/cron (RHEL)

```



 **Validation :** lignes d‚Äôex√©cution visibles.

 **Conseils :** centralisez vos logs (rsyslog/ELK).

 **Astuces :** grepez par commande/chemin.

 **Pi√®ges :** journaux rotate‚Üí cherchez aussi dans `.1` gz.



---



 ### 37) Tester localement la ligne cron (sans attendre)



 **√ânonc√© :** Ex√©cuter la commande  **telle ** qu‚Äôen cron.

 **D√©marche :**



```bash

SHELL=/bin/bash PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin /usr/local/bin/job.sh

```



 **Validation :** identique √† l‚Äôex√©cution cron.

 **Conseils :** reproduisez l‚Äôenvironnement minimal.

 **Astuces :** mettez ces lignes en en-t√™te de `job.sh`.

 **Pi√®ges :** tester dans votre shell interactif ‚â† cron.



---



 ### 38) Basculer un job cron vers  **systemd timer ** (fiabilit√©)



 **√ânonc√© :** Remplacer `0 3  *  *  * backup.sh` par timer.

 **D√©marche (extrait) :**



 * `/etc/systemd/system/backup.service` (Type=oneshot, ExecStart=/usr/local/bin/backup.sh)

 * `/etc/systemd/system/backup.timer` :



```

 [Timer]

OnCalendar=03:00

RandomizedDelaySec=10m

Persistent=true

```



 **Validation :** `systemctl enable --now backup.timer`, `systemctl status`.

 **Conseils :** timers g√®rent mieux DST, retard ‚ÄúPersistent‚Äù.

 **Astuces :** `systemd-analyze calendar "03:00"`.

 **Pi√®ges :** oublier d‚Äôactiver le  **timer ** (activer service ne suffit pas).



---



 ### 39) Emp√™cher l‚Äôoverlap avec systemd (LockPersonality/UMask)



 **√ânonc√© :** S√©curiser un job via directives systemd.

 **D√©marche :** dans le service, utilisez `UMask=007`, `RuntimeDirectory=‚Ä¶`, `ReadWritePaths=‚Ä¶`.

 **Validation :** permissions correctes, pas d‚Äô√©criture hors zones.

 **Conseils :** principle of least privilege.

 **Astuces :** `ProtectSystem=strict` si possible.

 **Pi√®ges :** trop restrictif ‚Üí job √©choue (lisez `journalctl -u`).



---



 ### 40) D√©fi final ‚Äî Playbook ‚ÄúPlanif fiable‚Äù



 **√ânonc√© :** Concevoir un gabarit standard de planification :



 * Wrapper `bash` strict (`set -Eeuo pipefail`), logs horodat√©s, `flock`, `timeout`, v√©rifs (disque/ r√©seau), rotation.

 * Version  **cron ** et  **systemd timer **.

&nbsp;  **D√©marche (checklist) :**



1 . Script `wrapper.sh` (pr√©/post, logs, timeout, flock)

2 . Crontab  **ou ** `backup.service` + `backup.timer`

3 . Logrotate pour le log

4 . Alerte en √©chec

&nbsp;   **Validation :** run manuel + run planifi√©, test d‚Äô√©chec (simulateur).

&nbsp;   **Conseils :** standardisez tous les jobs sur ce gabarit.

&nbsp;   **Astuces :** num√©rotez/verrouillez par t√¢che (`/run/<task>.lock`).

&nbsp;   **Pi√®ges :** oublier `Persistent=true` ‚Üí timers ratent les fen√™tres.



---



 ## Rappels essentiels (√† m√©moriser)



 *  **Toujours ** des chemins  **absolus ** dans cron/at.

 * Fixer  **SHELL ** et  **PATH ** en t√™te de crontab.

 * G√©rer  **concurrence ** (`flock`/PID file) et  **dur√©e ** (`timeout`).

 * Logguer et  **faire tourner ** les logs (logrotate).

 * Attention √†  **TZ/DST ** ; pour fiabilit√© ‚Üí  **systemd timers **.

 * S√©curiser  **secrets ** (fichiers 0600, variables).

 * Tester localement  **dans l‚Äôenvironnement cron ** (pas votre shell).
