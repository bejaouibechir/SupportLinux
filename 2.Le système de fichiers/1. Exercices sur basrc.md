# DÃ©mos bashrc

## bashrc vs profile 

`~/.bashrc` configure ton environnement **Ã  chaque shell interactif** (alias, fonctions, variablesâ€¦), tandis que `~/.profile` sâ€™exÃ©cute **au login** (dÃ©marrage de session) pour dÃ©finir lâ€™environnement global de lâ€™utilisateur.


* **`~/.bashrc`** (Bash Run Commands) est lu Ã  **chaque shell interactif non-login**.
* Sous Ubuntu, mÃªme en login SSH, `~/.profile` **source** `~/.bashrc`, donc tes rÃ©glages sâ€™appliquent quasi partout.
* On sâ€™en sert pour : **alias**, **fonctions**, **variables dâ€™environnement**, **personnalisation** (prompt, options Bash, PATH, etc.).

---

> Astuce : chaque dÃ©mo ajoute un bloc marquÃ© dans `~/.bashrc`.
>
> * **Activer** : colle le bloc, puis `source ~/.bashrc`.
> * **Tester** : commandes indiquÃ©es sous chaque dÃ©mo.
> * **Nettoyer** : utilise le bloc â€œNettoyageâ€ Ã  la fin.

---

## 1) Les alias â€” 2 dÃ©mos

### DÃ©mo A â€” Alias `ll` lisible

```bash
cat >> ~/.bashrc <<'EOF'
# ==== DEMO_ALIAS_LL_START ====
alias ll='ls -lah --group-directories-first --time-style=+"%Y-%m-%d %H:%M"'
# ==== DEMO_ALIAS_LL_END ====
EOF
source ~/.bashrc
# test
ll
```

### DÃ©mo B â€” Alias dâ€™analyse rapide des 5 processus les plus gourmands

```bash
cat >> ~/.bashrc <<'EOF'
# ==== DEMO_ALIAS_TOP5_START ====
alias top5='ps aux --sort=-%mem | head -n 5'
# ==== DEMO_ALIAS_TOP5_END ====
EOF
source ~/.bashrc
# test
top5
```

---

## 2) Les fonctions â€” 2 dÃ©mos

### DÃ©mo A â€” `mkcd`: crÃ©er un dossier puis sâ€™y dÃ©placer

```bash
cat >> ~/.bashrc <<'EOF'
# ==== DEMO_FUNC_MKCD_START ====
mkcd () {
  [ -z "$1" ] && { echo "Usage: mkcd <dir>"; return 1; }
  mkdir -p -- "$1" && cd -- "$1" || return
}
# ==== DEMO_FUNC_MKCD_END ====
EOF
source ~/.bashrc
# test
mkcd /tmp/demo-mkcd && pwd
```

### DÃ©mo B â€” `extract`: extraire selon lâ€™extension (.tar.gz, .zip, â€¦)

```bash
cat >> ~/.bashrc <<'EOF'
# ==== DEMO_FUNC_EXTRACT_START ====
extract () {
  [ -f "$1" ] || { echo "Fichier introuvable: $1"; return 1; }
  case "$1" in
    *.tar.gz|*.tgz)   tar -xzf "$1"   ;;
    *.tar.bz2|*.tbz2) tar -xjf "$1"   ;;
    *.tar.xz|*.txz)   tar -xJf "$1"   ;;
    *.zip)            unzip -q "$1"   ;;
    *) echo "Type non gÃ©rÃ©: $1"; return 2 ;;
  esac
}
# ==== DEMO_FUNC_EXTRACT_END ====
EOF
source ~/.bashrc
# test rapide (ex: crÃ©e un zip puis extrait)
cd /tmp && echo hello > a.txt && zip -q demo.zip a.txt && rm a.txt && extract demo.zip && ls -l
```

---

## 3) Variables dâ€™environnement â€” 2 dÃ©mos

### DÃ©mo A â€” DÃ©finir une variable `APP_ENV` persistante

```bash
cat >> ~/.bashrc <<'EOF'
# ==== DEMO_ENV_APPENV_START ====
export APP_ENV="production"
# ==== DEMO_ENV_APPENV_END ====
EOF
source ~/.bashrc
# test
echo "APP_ENV=$APP_ENV"
```

### DÃ©mo B â€” Ajouter `~/bin` au PATH et exÃ©cuter un script perso

```bash
cat >> ~/.bashrc <<'EOF'
# ==== DEMO_ENV_PATH_START ====
# Ajoute ~/bin en tÃªte du PATH si prÃ©sent
if [ -d "$HOME/bin" ] && [[ ":$PATH:" != *":$HOME/bin:"* ]]; then
  export PATH="$HOME/bin:$PATH"
fi
# ==== DEMO_ENV_PATH_END ====
EOF
mkdir -p ~/bin
cat > ~/bin/hello <<'SH'
#!/usr/bin/env bash
echo "Hello from ~/bin on $(hostname)"
SH
chmod +x ~/bin/hello
source ~/.bashrc
# test
which hello && hello
```

---

## 4) Personnalisation dâ€™environnement â€” 2 dÃ©mos

### DÃ©mo A â€” Prompt PS1 informatif (heure, user\@hÃ´te, dossier, code retour)

```bash
cat >> ~/.bashrc <<'EOF'
# ==== DEMO_PERSONA_PS1_START ====
# Couleurs
RED="\[\e[31m\]"; GREEN="\[\e[32m\]"; BLUE="\[\e[34m\]"; YELLOW="\[\e[33m\]"
RESET="\[\e[0m\]"
# Affiche le code retour prÃ©cÃ©dent si non nul
ret_code_segment='$(ret=$?; [ $ret -ne 0 ] && echo "'"$RED"'[exit:$ret]'"$RESET"' ")'
# PS1: [HH:MM] user@host:cwd (APP_ENV) $
export PS1="[\A] ${BLUE}\u@\h${RESET}:${YELLOW}\w${RESET} (\$APP_ENV) \$ret_code_segment\$ "
# ==== DEMO_PERSONA_PS1_END ====
EOF
source ~/.bashrc
# test: force une erreur pour voir [exit:...]
false ; echo "Si rouge [exit:1] apparaÃ®t dans le prompt, c'est OK."
```

### DÃ©mo B â€” Options Bash utiles (auto-cd, casse insensible, historique propre)

```bash
cat >> ~/.bashrc <<'EOF'
# ==== DEMO_PERSONA_SHOPT_HIST_START ====
# Aller dans un dossier en tapant juste son nom (auto_cd)
shopt -s autocd
# Globbing insensible Ã  la casse (ls *.TXT matche *.txt)
shopt -s nocaseglob
# Historique: pas de doublons, fusionne les occurrences, taille Ã©tendue
export HISTCONTROL=ignoredups:erasedups
export HISTSIZE=50000
export HISTFILESIZE=100000
# ==== DEMO_PERSONA_SHOPT_HIST_END ====
EOF
source ~/.bashrc
# test:
mkdir -p /tmp/DemoCase && cd /tmp/democase && pwd   # autocd + nocaseglob
history | tail -n 5
```

---

## Nettoyage (optionnel)

Supprime tous les blocs ajoutÃ©s par ces dÃ©mos :

```bash
# Sauvegarde prÃ©alable
cp ~/.bashrc ~/.bashrc.bak.$(date +%F_%H%M)
# Suppression par marqueurs
sed -i -e '/^# ==== DEMO_.*_START ====/,/^# ==== DEMO_.*_END ====/d' ~/.bashrc
# Recharger
source ~/.bashrc
echo "Nettoyage terminÃ©. Copie de sauvegarde: ~/.bashrc.bak.*"
```


# Execices sur utilisation de ~/.bashrc
---
### **Exercice 1 â€“ Alias pour `ls -la`**
**ProblÃ¨me :** Tu tapes toujours `ls -la` pour voir les fichiers.  
**Objectif :** CrÃ©er un alias simple.

âœ… **Solution** (dans `~/.bashrc`) :
```bash
alias ll='ls -la'
```

ðŸ’¡ **Utilisation** :
```bash
ll
```

---

### **Exercice 2 â€“ Naviguer vite dans un dossier**
**ProblÃ¨me :** Tu vas souvent dans `/var/www/html`.  
**Objectif :** CrÃ©er un alias.

âœ… **Solution** :
```bash
alias web='cd /var/www/html'
```

ðŸ’¡ **Utilisation** :
```bash
web
```

---

### **Exercice 3 â€“ Corriger une faute de frappe**
**ProblÃ¨me :** Tu tapes souvent `sl` au lieu de `ls`.  
**Objectif :** Rediriger la faute.

âœ… **Solution** :
```bash
alias sl='ls'
```

ðŸ’¡ **Utilisation** :
```bash
sl
```

---

### **Exercice 4 â€“ Ajouter une option par dÃ©faut Ã  une commande**
**ProblÃ¨me :** Tu veux que `grep` ait toujours les couleurs.  
**Objectif :** Modifier le comportement par dÃ©faut.

âœ… **Solution** :
```bash
alias grep='grep --color=auto'
```

ðŸ’¡ **Utilisation** :
```bash
grep "mot" fichier.txt
```

---

### **Exercice 5 â€“ Tester un alias temporaire**
**ProblÃ¨me :** Tu veux tester une commande sans l'enregistrer.  
**Objectif :** CrÃ©er un alias pour la session actuelle.

âœ… **Solution** (directement dans le terminal) :
```bash
alias bonjour='echo Salut !'
```

ðŸ’¡ **Utilisation** :
```bash
bonjour
```

---

## ðŸ”¸ Niveau 2 â€“ Fonctions de base (Ex. 6 Ã  10)

---

### **Exercice 6 â€“ Sauvegarder un dossier**
**ProblÃ¨me :** Tu veux sauvegarder ton dossier de travail.  
**Objectif :** CrÃ©er une fonction avec nom de sauvegarde.

âœ… **Solution** :
```bash
sauvegarder() {
    cp -r ~/travail ~/sauvegardes/$(date +%F)
}
```

ðŸ’¡ **Utilisation** :
```bash
sauvegarder
```

---

### **Exercice 7 â€“ Ouvrir plusieurs fichiers en une commande**
**ProblÃ¨me :** Tu veux Ã©diter plusieurs fichiers de config ensemble.  
**Objectif :** CrÃ©er une fonction rapide.

âœ… **Solution** :
```bash
editconfigs() {
    nano ~/.bashrc ~/.profile ~/.vimrc
}
```

ðŸ’¡ **Utilisation** :
```bash
editconfigs
```

---

### **Exercice 8 â€“ CrÃ©er et entrer dans un dossier**
**ProblÃ¨me :** Tu veux crÃ©er un dossier et tâ€™y dÃ©placer dâ€™un coup.  
**Objectif :** Fonction avec argument.

âœ… **Solution** :
```bash
mdcd() {
    mkdir -p "$1" && cd "$1"
}
```

ðŸ’¡ **Utilisation** :
```bash
mdcd mon_dossier
```

---

### **Exercice 9 â€“ Initialiser un projet rapidement**
**ProblÃ¨me :** Tu veux automatiser la crÃ©ation dâ€™un projet git.  
**Objectif :** Routine de setup.

âœ… **Solution** :
```bash
init_projet() {
    mkdir "$1" && cd "$1" && git init && touch README.md
}
```

ðŸ’¡ **Utilisation** :
```bash
init_projet nom_du_projet
```

---

### **Exercice 10 â€“ Afficher la date Ã  chaque ouverture de terminal**
**ProblÃ¨me :** Tu veux voir la date Ã  chaque session.  
**Objectif :** Message de bienvenue.

âœ… **Solution** :
```bash
echo "Nous sommes le $(date '+%A %d %B %Y')"
```

ðŸ’¡ **Utilisation** : automatique Ã  chaque ouverture du terminal.

---

## ðŸ”¹ Niveau 3 â€“ Variables dâ€™environnement (Ex. 11 Ã  15)

---

### **Exercice 11 â€“ DÃ©finir une variable simple**
**ProblÃ¨me :** Tu veux utiliser ton prÃ©nom dans tes scripts.  
**Objectif :** CrÃ©er une variable dâ€™environnement.

âœ… **Solution** :
```bash
export PRENOM="Amine"
```

ðŸ’¡ **Utilisation** :
```bash
echo "Bonjour $PRENOM"
```

---

### **Exercice 12 â€“ Variable utilisÃ©e dans une fonction**
**ProblÃ¨me :** Tu veux une salutation personnalisÃ©e.  
**Objectif :** RÃ©utiliser une variable dans une fonction.

âœ… **Solution** :
```bash
saluer() {
    echo "Salut $PRENOM !"
}
```

ðŸ’¡ **Utilisation** :
```bash
saluer
```

---

### **Exercice 13 â€“ Ajouter un dossier Ã  ton PATH**
**ProblÃ¨me :** Tu veux pouvoir exÃ©cuter tes scripts depuis nâ€™importe oÃ¹.  
**Objectif :** Ã‰tendre la variable PATH.

âœ… **Solution** :
```bash
export PATH="$PATH:$HOME/scripts"
```

ðŸ’¡ **Utilisation** : aprÃ¨s avoir mis des scripts exÃ©cutables dans `~/scripts`, tu peux simplement faire :
```bash
mon_script
```

---

### **Exercice 14 â€“ Stocker la date dans une variable**
**ProblÃ¨me :** Tu veux une variable `TODAY` avec la date.  
**Objectif :** CrÃ©er une variable dynamique.

âœ… **Solution** :
```bash
export TODAY=$(date +%F)
```

ðŸ’¡ **Utilisation** :
```bash
echo "Aujourdâ€™hui : $TODAY"
```

---

### **Exercice 15 â€“ Variable temporaire de session**
**ProblÃ¨me :** Tu veux tester un environnement temporaire.  
**Objectif :** CrÃ©er une variable pour une session uniquement.

âœ… **Solution** :
```bash
export ENVIRONNEMENT="test"
```

ðŸ’¡ **Utilisation** :
```bash
echo $ENVIRONNEMENT
```

---

## ðŸ”¸ Niveau 4 â€“ Personnalisation de session (Ex. 16 Ã  20)

---

### **Exercice 16 â€“ Modifier le prompt du terminal**
**ProblÃ¨me :** Tu veux que lâ€™heure sâ€™affiche dans ton prompt.  
**Objectif :** Modifier `PS1`.

âœ… **Solution** :
```bash
export PS1="\t \u@\h:\w\$ "
```

ðŸ’¡ **Utilisation** : le prompt changera dÃ¨s la recharge du `.bashrc`.

---

### **Exercice 17 â€“ Message de bienvenue personnalisÃ©**
**ProblÃ¨me :** Tu veux un message sympa Ã  chaque session.  
**Objectif :** Ajouter une ligne dans `.bashrc`.

âœ… **Solution** :
```bash
echo "Bienvenue $USER, bon travail !"
```

ðŸ’¡ **Utilisation** : sâ€™exÃ©cute automatiquement Ã  chaque ouverture de terminal.

---

### **Exercice 18 â€“ ExÃ©cuter une commande Ã  la connexion**
**ProblÃ¨me :** Tu veux lancer `neofetch` automatiquement.  
**Objectif :** Lancer un programme Ã  la connexion.

âœ… **Solution** (dans `.profile` ou `.bash_profile`) :
```bash
if command -v neofetch &> /dev/null; then
    neofetch
fi
```

ðŸ’¡ **Utilisation** : affichage automatique des infos systÃ¨me au login.

---

### **Exercice 19 â€“ Changer les couleurs du terminal**
**ProblÃ¨me :** Tu veux que le texte du prompt soit en vert.  
**Objectif :** Personnalisation visuelle.

âœ… **Solution** :
```bash
export PS1="\[\e[32m\]\u@\h:\w\$ \[\e[m\]"
```

ðŸ’¡ **Utilisation** : couleur appliquÃ©e dÃ¨s la recharge du `.bashrc`.

---

### **Exercice 20 â€“ Lancer automatiquement un environnement de dev**
**ProblÃ¨me :** Tu veux automatiser la configuration dâ€™un projet Python.  
**Objectif :** Routine dâ€™ouverture de session DevOps.

âœ… **Solution** :
```bash
dev_env() {
    cd ~/projets/mon_projet && source venv/bin/activate && code .
}
```

ðŸ’¡ **Utilisation** :
```bash
dev_env
```

---

Souhaites-tu que je te gÃ©nÃ¨re un PDF ou un fichier `.md` prÃªt Ã  distribuer pour ton bootcamp ?
