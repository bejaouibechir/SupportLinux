# Démo cas d'utilisation du dossier srv pour héberger un site web

## **Objectif**

* Créer un mini site web statique.
* Héberger les fichiers dans **`/srv/www/demo`**.
* Configurer **Nginx** pour le servir.
* Vérifier depuis le navigateur.

---

## **Étape 1 — Installer Nginx**

```bash
sudo apt update && sudo apt install nginx -y
```

Vérifie que Nginx fonctionne :

```bash
systemctl status nginx
```

 Si tout est bon, tu verras `active (running)`.

---

## **Étape 2 — Créer l’arborescence dans `/srv`**

```bash
sudo mkdir -p /srv/www/demo
sudo mkdir -p /srv/www/demo/assets
```

Créons un **fichier HTML** :

```bash
sudo tee /srv/www/demo/index.html > /dev/null <<'EOF'
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Démo /srv avec Nginx</title>
  <style>
    body {
      background-color: #f4f4f4;
      font-family: Arial, sans-serif;
      text-align: center;
      margin-top: 80px;
    }
    h1 { color: #2a7ae2; }
    p  { color: #444; }
  </style>
</head>
<body>
  <h1>Bienvenue sur mon mini site web !</h1>
  <p>Ce contenu est servi depuis <b>/srv/www/demo</b></p>
</body>
</html>
EOF
```

---

## **Étape 3 — Configurer Nginx**

On crée un **nouveau fichier de configuration** pour le site :

```bash
sudo nano /etc/nginx/sites-available/demo
```

**Contenu :**

```nginx
server {
    listen 80;
    server_name _;

    root /srv/www/demo;
    index index.html;

    location / {
        try_files $uri $uri/ =404;
    }
}
```

---

## **Étape 4 — Activer le site**

Crée un lien symbolique :

```bash
sudo ln -s /etc/nginx/sites-available/demo /etc/nginx/sites-enabled/
```

Désactive le site par défaut :

```bash
sudo rm /etc/nginx/sites-enabled/default
```

Teste la configuration :

```bash
sudo nginx -t
```

 Tu dois voir : `syntax is ok` et `test is successful`.

Recharge Nginx :

```bash
sudo systemctl reload nginx
```

---

## **Étape 5 — Ouvrir le firewall AWS**

Dans la **console AWS EC2** → **Security Groups** → règle entrante →

* Port : **80**
* Protocole : **TCP**
* Source : **0.0.0.0/0**

---

## **Étape 6 — Tester dans le navigateur**

* Récupère l’IP publique :

```bash
curl -s ifconfig.me
```

* Ouvre dans ton navigateur :

```
http://<ton-ip-publique>
```

 Résultat : **page HTML affichée** depuis `/srv/www/demo`.

---

## **Étape 7 — Vérifier les logs**

Nginx enregistre les accès dans `/var/log/nginx/access.log` :

```bash
sudo tail -f /var/log/nginx/access.log
```

Chaque visite apparaîtra en temps réel.

